<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.kosmo.travary.service.impl.touristspot.PopularityMapper">
	<select id="selectAcmd" resultType="map" parameterType="String">
		SELECT * FROM 
		(SELECT name,lat,lnt
		FROM acmd s JOIN 
		(SELECT SUM(JAN+FEB+MAR+APR+MAY+JUN+JUL+AUG+SEP+OCT+NOV+DEC) 
		as total,no FROM acmd_pop GROUP BY NO) p
		ON s.no=p.no WHERE sregion=#{region} ORDER BY total desc)
		WHERE rownum =1
	</select>
	<select id="selectTop5ByRegion" resultType="map" parameterType="String">
		SELECT * FROM 
		(SELECT name,lat,lnt
		FROM tourist_spot s JOIN 
		(SELECT SUM(JAN+FEB+MAR+APR+MAY+JUN+JUL+AUG+SEP+OCT+NOV+DEC) 
		as total,no FROM tourist_spot_popularity GROUP BY NO) p
		ON s.no=p.no WHERE sregion=#{region} ORDER BY total desc)
		WHERE rownum &lt;=5
	</select>
	<select id="selectSregion" resultType="String">
		SELECT distinct sregion from place_loc ORDER BY sregion
	</select>
</mapper>